<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>



  <link href='//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext' rel='stylesheet' type='text/css'>


<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.5.1"/>


    <meta name="description" content="Chandler's Blog" />



  <meta name="keywords" content="Hexo,next" />





  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.1" />


<meta name="description" content="Chandler&apos;s Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Amateur Programming">
<meta property="og:url" content="http://github.com/ttma1046/index.html">
<meta property="og:site_name" content="Amateur Programming">
<meta property="og:description" content="Chandler&apos;s Blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Amateur Programming">
<meta name="twitter:description" content="Chandler&apos;s Blog">


<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'post'
  };
</script>

  <title> Amateur Programming </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  



  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand" rel="start">
      <span class="logo">
        <i class="icon-next-logo"></i>
      </span>
      <span class="site-title">Amateur Programming</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon icon-next-home"></i> <br />
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            <i class="menu-item-icon icon-next-archives"></i> <br />
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            <i class="menu-item-icon icon-next-tags"></i> <br />
            Tags
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content"> 
  <section id="posts" class="posts-expand">
    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2018/05/27/angular-html/" itemprop="url">
                Angualr within Html
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2018-05-27T12:17:23+00:00" content="2018-05-27">
            2018-05-27
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><ul>
<li><p>ApplicationRef - applicationRef.tick ?</p>
</li>
<li><p>ChangeDetectorRef - change detectection</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">@ViewChildren(AuthMessageComponent) authMessageComponent: QueryList&lt;AuthMessageComponent&gt;</span><br><span class="line"></span><br><span class="line"><span class="constructor"><span class="keyword">constructor</span>(<span class="keyword">private</span> cd: ChangeDetectorRef) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">ngAfterViewInit(): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.email);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.authMessageComponent) &#123;</span><br><span class="line">    <span class="keyword">this</span>.authMessageComponent.forEach((message) =&gt; &#123;</span><br><span class="line">      message.days = <span class="number">30</span>; </span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.cd.detectChanges();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ComponentRef</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">@ViewChild(<span class="string">'entry'</span>, &#123; read : ViewContainerRef &#125;) entry: ViewContainerRef</span><br><span class="line"></span><br><span class="line">authComponent: ComponentRef&lt;AuthFormComponent&gt;;</span><br><span class="line"></span><br><span class="line"><span class="constructor"><span class="keyword">constructor</span>(<span class="keyword">private</span> resolver: ComponentFactoryResolver) </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ngAfterContentInit(): <span class="built_in">void</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> authFormFactory = <span class="keyword">this</span>.resolver.resolveComponentFactory(AuthFormComponent);</span><br><span class="line">  <span class="keyword">this</span>.authComponent = <span class="keyword">this</span>.entry.createComponent(authFormFactory);</span><br><span class="line">  <span class="keyword">this</span>.authComponent.instance.title = <span class="string">'Create account'</span>;</span><br><span class="line">  <span class="keyword">this</span>.authComponent.instance.submitted.subscribe(<span class="keyword">this</span>.loginUser);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">loginUser(user: User) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Login'</span>, user);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">destoryComponent() &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.authComponent);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ElementRef - html element, Test</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">@ViewChild(<span class="string">'#email'</span>) email: ElementRef;</span><br><span class="line">@ViewChildren(<span class="string">'noTrackBy'</span>)   heroesNoTrackBy:   QueryList&lt;ElementRef&gt;;</span><br><span class="line">    </span><br><span class="line"><span class="comment">// custom directive</span></span><br><span class="line"><span class="constructor"><span class="keyword">constructor</span>(el: ElementRef) </span>&#123;</span><br><span class="line">  el.nativeElement.style.backgroundColor = <span class="string">'powderblue'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Directive, ElementRef, HostListener, Input &#125; from <span class="string">'@angular/core'</span>;</span><br><span class="line"> </span><br><span class="line">@Directive(&#123;</span><br><span class="line">  selector: <span class="string">'[appHighlight]'</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> HighlightDirective &#123;</span><br><span class="line"> </span><br><span class="line">  @Input(<span class="string">'appHighlight'</span>) highlightColor: <span class="built_in">string</span>;</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">private</span> el: HTMLElement;</span><br><span class="line"> </span><br><span class="line">  <span class="constructor"><span class="keyword">constructor</span>(el: ElementRef) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.el = el.nativeElement;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  @HostListener(<span class="string">'mouseenter'</span>) onMouseEnter() &#123;</span><br><span class="line">    <span class="keyword">this</span>.highlight(<span class="keyword">this</span>.highlightColor || <span class="string">'cyan'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  @HostListener(<span class="string">'mouseleave'</span>) onMouseLeave() &#123;</span><br><span class="line">    <span class="keyword">this</span>.highlight(<span class="literal">null</span>);</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">private</span> highlight(color: <span class="built_in">string</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.el.style.backgroundColor = color;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>EmbeddedViewRef</p>
</li>
<li><p>forwardRef - DI in Action</p>
</li>
<li><p>TemplateRef - acquire the <ng-template> contents, structual-directives</ng-template></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">ng-template</span> #<span class="attribute">tmpl</span>&gt;</span></span><br><span class="line">  Tott Motto: England UK</span><br><span class="line"><span class="tag">&lt;/<span class="title">ng-template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">div</span> #<span class="attribute">entry</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">@ViewChild(<span class="string">'entry'</span>, &#123; read : ViewContainerRef &#125;) entry: ViewContainerRef</span><br><span class="line">@ViewChild(<span class="string">'tmpl'</span>) tmpl: TemplateRef&lt;<span class="built_in">any</span>&gt;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.entry.createEmbeddedView(<span class="keyword">this</span>.tmpl);</span><br></pre></td></tr></table></figure>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">this</span>.viewContainerRef.createEmbeddedView(<span class="keyword">this</span>.templateRef);</span><br></pre></td></tr></table></figure>
<ul>
<li><p>NgModuleRef</p>
</li>
<li><p>PlatformRef - Test</p>
</li>
<li><p>resolveForwardRef</p>
</li>
<li><p>ViewRef</p>
</li>
<li><p>ViewContainerRef - dynamic component</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> viewContainerRef = <span class="keyword">this</span>.adHost.viewContainerRef;</span><br><span class="line">viewContainerRef.clear();</span><br><span class="line">   </span><br><span class="line"><span class="keyword">let</span> componentRef = viewContainerRef.createComponent(componentFactory);</span><br><span class="line">(<span class="xml"><span class="tag">&lt;<span class="title">AdComponent</span>&gt;</span>componentRef.instance).data = adItem.data;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Component, ViewChild, ViewContainerRef, ComponentFactoryResolver, AfterContentInit &#125; from <span class="string">'@angular/core'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; User &#125; from <span class="string">'./auth-form/auth-form.interface'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AuthFormComponent &#125; from <span class="string">'./auth-form/auth-form.component'</span>;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: <span class="string">'app-root'</span>,</span><br><span class="line">  template: `</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="title">div</span> #<span class="attribute">entry</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">  `</span><br><span class="line">&#125;)</span><br><span class="line">export class AppComponent implements AfterContentInit &#123;</span><br><span class="line">  @ViewChild('entry', &#123; read : ViewContainerRef &#125;) entry: ViewContainerRef</span><br><span class="line"></span><br><span class="line">  constructor(private resolver: ComponentFactoryResolver) &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ngAfterContentInit(): void &#123;</span><br><span class="line">    const authFormFactory = this.resolver.resolveComponentFactory(AuthFormComponent);</span><br><span class="line">    const component = this.entry.createComponent(authFormFactory);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  loginUser(user: User) &#123;</span><br><span class="line">    console.log('Login', user);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2018/05/27/angular-dependency-injection-in-action/" itemprop="url">
                Angular DI in Action
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2018-05-27T11:50:29+00:00" content="2018-05-27">
            2018-05-27
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2018/05/17/angular-dependency-injection/" itemprop="url">
                Angular Dependency Injection
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2018-05-17T11:16:30+00:00" content="2018-05-17">
            2018-05-17
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><h1 id="Injector">Injector</h1><p>A service like HeroService is just a class in Angular until you register it with an Angular dependency injector.</p>
<p>An Angular injector is responsible for creating service instances and injecting them into classes like the HeroListComponent.</p>
<p>You rarely create an Angular injector yourself. Angular creates injectors for you as it executes the app, starting with the root injector that it creates during the bootstrap process.<br>          Injector<br>Provider ————-&gt; Service Instance</p>
<p>Angular doesn’t automatically know how you want to create instances of your services or the injector to create your service. You must configure it by specifying providers for every service.</p>
<p>Providers tell the injector how to create the service. Without a provider, the injector would not know that it is responsible for injecting the service nor be able to create the service.</p>
<p>There are many ways to register a service provider with an injector. This section shows the most common ways of configuring a provider for your services.</p>
<p>Register Provider:</p>
<h2 id="@Injectable_providers">@Injectable providers</h2><p>@Injectable configure a provider for those services.<br><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Injectable &#125; from <span class="string">'@angular/core'</span>;</span><br><span class="line"></span><br><span class="line">@Injectable(&#123;</span><br><span class="line">  providedIn: <span class="string">'root'</span>,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> HeroService &#123;</span><br><span class="line">  <span class="constructor"><span class="keyword">constructor</span>() </span>&#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><code>providedIn</code> tells Angular that the root injector is responsible for creating an instance of the HeroService (by invoking its constructor) and making it available across the application.</p>
<p>In the following excerpt, the @Injectable decorator is used to configure a provider that will be available in any injector that includes the HeroModule.</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Injectable &#125; from <span class="string">'@angular/core'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; HeroModule &#125; from <span class="string">'./hero.module'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; HEROES &#125;     from <span class="string">'./mock-heroes'</span>;</span><br><span class="line"></span><br><span class="line">@Injectable(&#123;</span><br><span class="line">  <span class="comment">// we declare that this service should be created</span></span><br><span class="line">  <span class="comment">// by any injector that includes HeroModule.</span></span><br><span class="line"></span><br><span class="line">  providedIn: HeroModule,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> HeroService &#123;</span><br><span class="line">  getHeroes() &#123; <span class="keyword">return</span> HEROES; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="@NgModule_providers">@NgModule providers</h2><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">providers: [</span><br><span class="line">  UserService,</span><br><span class="line">  &#123; provide: APP_CONFIG, useValue: HERO_DI_CONFIG &#125;</span><br><span class="line">],</span><br></pre></td></tr></table></figure>
<p>The first entry registers the UserService class (not shown) under the UserService injection token. The second registers a value (HERO_DI_CONFIG) under the APP_CONFIG injection token.</p>
<h2 id="@Component_providers">@Component providers</h2><p>In addition to providing the service application-wide or within a particular @NgModule, services can also be provided in specific components. Services provided in component-level is only available within that component injector or in any of its child components.</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">import &#123; Component &#125; from '@angular/core';</span><br><span class="line">import &#123; HeroService &#125; from './hero.service';</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: 'app-heroes',</span><br><span class="line">  providers: [ HeroService ],</span><br><span class="line">  template: `</span><br><span class="line">    &lt;h2&gt;Heroes&lt;/h2&gt;</span><br><span class="line">    &lt;app-hero-list&gt;&lt;/app-hero-list&gt;</span><br><span class="line">  `</span><br><span class="line">&#125;)</span><br><span class="line">export class HeroesComponent &#123; &#125;</span><br></pre></td></tr></table></figure>
<h2 id="@Injectable,_@NgModule_or_@Component">@Injectable, @NgModule or @Component</h2><ul>
<li><p>@Injectable<br>Tree shakable</p>
</li>
<li><p>@NgModule.providers<br>registered with the application’s root injector. Angular can inject the corresponding services in any class it creates. Once created, a service instance lives for the life of the app and Angular injects this one service instance in every class that needs it.</p>
</li>
</ul>
<p>You’re likely to inject the UserService in many places throughout the app and will want to inject the same service instance every time. Providing the UserService with an Angular module is a good choice if an @Injectable provider is not an option..</p>
<p>To be precise, Angular module providers are registered with the root injector unless the module is lazy loaded. In this sample, all modules are eagerly loaded when the application starts, so all module providers are registered with the app’s root injector.</p>
<ul>
<li>@Component.providers</li>
</ul>
<p>A component’s providers (@Component.providers) are registered with each component instance’s own injector.</p>
<p>Angular can only inject the corresponding services in that component instance or one of its descendant component instances. Angular cannot inject the same service instance anywhere else.</p>
<h1 id="Providers">Providers</h1><ul>
<li>The provide object literal</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">providers: [Logger]</span><br></pre></td></tr></table></figure>
<p>shorthand expressioin using a provider literal with two properties:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[&#123; provide: Logger, useClasss: Logger &#125;]</span><br></pre></td></tr></table></figure>
<ul>
<li>Alternative class providers</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[&#123; provide: Logger, useClass: BetterLogger &#125;]</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@Injectable()&#10;export class EvenBetterLogger extends Logger &#123;&#10;  constructor(private userService: UserService) &#123; super(); &#125;&#10;&#10;  log(message: string) &#123;&#10;    let name = this.userService.user.name;&#10;    super.log(`Message to $&#123;name&#125;: $&#123;message&#125;`);&#10;  &#125;&#10;&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[ &#10;    UserService,&#10;    &#123; provide: Logger, useClass: EvenBetterLogger &#125;&#10;]</span><br></pre></td></tr></table></figure>
<ul>
<li>Aliased class providers<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[ NewLogger,&#10;  // Not aliased! Creates two instances of `NewLogger`&#10;  &#123; provide: OldLogger, useClass: NewLogger&#125;]</span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[ NewLogger,&#10;  // Alias OldLogger w/ reference to NewLogger&#10;  &#123; provide: OldLogger, useExisting: NewLogger&#125;]</span><br></pre></td></tr></table></figure>
<ul>
<li>Value providers</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">export function SilentLoggerFn() &#123;&#125;&#10;&#10;const silentLogger = &#123;&#10;  logs: [&#39;Silent logger says &#34;Shhhhh!&#34;. Provided via &#34;useValue&#34;&#39;],&#10;  log: SilentLoggerFn&#10;&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[&#123; provide: Logger, useValue: silentLogger &#125;]</span><br></pre></td></tr></table></figure>
<ul>
<li>Factory providers<br><strong>hero.service.ts</strong><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">constructor(&#10;  private logger: Logger,&#10;  private isAuthorized: boolean) &#123; &#125;&#10;&#10;getHeroes() &#123;&#10;  let auth = this.isAuthorized ? &#39;authorized &#39; : &#39;unauthorized&#39;;&#10;  this.logger.log(`Getting heroes for $&#123;auth&#125; user.`);&#10;  return HEROES.filter(hero =&#62; this.isAuthorized || !hero.isSecret);&#10;&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>hero.service.provider.ts</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">let heroServiceFactory = (logger: Logger, userService: UserService) =&#62; &#123;&#10;  return new HeroService(logger, userService.user.isAuthorized);&#10;&#125;;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">export let heroServiceProvider =&#10;  &#123; provide: HeroService,&#10;    useFactory: heroServiceFactory,&#10;    deps: [Logger, UserService]&#10;  &#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>Creating Tree-shakeable providers<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@Injectable(&#123;&#10;  providedIn: &#39;root&#39;,&#10;  useFactory: () =&#62; new Service(&#39;dependency&#39;),&#10;&#125;)&#10;export class Service &#123;&#10;  constructor(private dep: string) &#123;&#10;  &#125;&#10;&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>Injection Token</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import &#123; InjectionToken &#125; from &#39;@angular/core&#39;;&#10;// export const TOKEN = new InjectionToken(&#39;desc&#39;);&#10;&#10;export const TOKEN = &#10;  new InjectionToken(&#39;desc&#39;, &#123; providedIn: &#39;root&#39;, factory: () =&#62; new AppConfig(), &#125;)&#10;&#10;const TOKEN = &#10;  new InjectionToken(&#39;tree-shakeable token&#39;, &#10;    &#123; providedIn: &#39;root&#39;, factory: () =&#62; &#10;        new AppConfig(inject(Parameter1), inject(Paremeter2)), &#125;);&#10;        &#10;export const HERO_DI_CONFIG: AppConfig = &#123;&#10;  apiEndpoint: &#39;api.heroes.com&#39;,&#10;  title: &#39;Dependency Injection&#39;&#10;&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">constructor(@Inject(TOKEN));</span><br></pre></td></tr></table></figure></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2018/03/07/cqrsandeventsourcing/" itemprop="url">
                CRQS and Event Sourcing
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2018-03-07T09:45:58+00:00" content="2018-03-07">
            2018-03-07
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><h1 id="CQS">CQS</h1><p>command query separation</p>
<p>a method should only have been responsible for executing a <strong> command </strong></p>
<p>against an object or it should be responsible for retrieving information from real objects <strong> query </strong></p>
<p>you should never do both.</p>
<h1 id="CQRS">CQRS</h1><p>command query responsibility separation or segregation</p>
<p>you should have a separate object for your commands </p>
<p>and a separate object for your queries</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> COMMANDS &#60;- CLIENT &#60;------------&#10;    |                           |&#10;    V                           |&#10;DISPATCHER                      |&#10;    |                           |&#10;    V                         VIEW&#10; HANDLER                        ^&#10;    |                           |&#10;    V                         READ&#10;  DOMAIN                    DATABASE&#10;    |                           ^&#10;    V                           |&#10;REPOSITORY                  PROJECTION  &#10;    |                           ^&#10;    V                           |&#10;  EVENTS  -&#62; EVENT STORE -&#62; PROJECTION&#10;                             MANAGER&#10;```</span><br></pre></td></tr></table></figure>
<pre><code>ADMIN PATIENT (Command)
      <span class="string">|</span>
      V
</code></pre><p>  ———-DISPATCHER————-<br>  |           |            |<br>  |           |            |<br>  V           V            V<br>ADMIT     TRANSFER     DISCHARGE<br>HANDLER    HANDLER      HANDLER<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#10;</span><br></pre></td></tr></table></figure></p>
<p>ADMIN HANDLER<br>      |<br>      V                   ——————————————<br>  ENCOUNTER               |AGGREGATE                 |<br>  ^      |Events + 1      |—————————————|<br>  |Events|                |LIST<event> VERSION APPLY |<br>  |      V                ——————————————<br>  REPOSITORY<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#10;</span><br></pre></td></tr></table></figure></event></p>
<pre><code> PATIENT
 ADMITTED
    <span class="string">|</span>
    V
PROJECTION  &lt;----- CHECKPOINT
 MANAGER    -----&gt;
    <span class="string">|</span>
    V
 WARD VIEW
PROJECTION
    <span class="string">|</span>
    V
 WARD VIEW
</code></pre><p>```    </p>
<h1 id="EVENTUAL_CONSISTENCY">EVENTUAL CONSISTENCY</h1><h1 id="Things_need_to_do">Things need to do</h1><ol>
<li>Validing command is correct.</li>
<li></li>
</ol>
<p><a href="https://www.youtube.com/watch?v=8JKjvY4etTY" target="_blank" rel="external">https://www.youtube.com/watch?v=8JKjvY4etTY</a><br><a href="https://www.youtube.com/watch?v=holjbuSbv3k" target="_blank" rel="external">https://www.youtube.com/watch?v=holjbuSbv3k</a></p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2018/02/25/jsfunctiondelcarationsvsfunctionexpressions/" itemprop="url">
                Javascript Function Declarations vs. Function Expressions
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2018-02-25T08:47:26+00:00" content="2018-02-25">
            2018-02-25
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p><a href="https://javascriptweblog.wordpress.com/2010/07/06/function-declarations-vs-function-expressions/" target="_blank" rel="external">Function Declarations vs. Function Expressions</a></p>
<h1 id="Question_1:">Question 1:</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bar();</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">8</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(foo()); <span class="comment">// 8</span></span><br></pre></td></tr></table></figure>
<p>Question 1 uses function declarations which means they get hoisted.</p>
<p>“Function declarations and function variables are always moved (‘hoisted’) to the top of their JavaScript scope by the JavaScript interpreter.”</p>
<p>When a function declaration is hoisted the entire function body is lifted with it, so after the interpreter has finished with the code in Question 1 it runs more like this:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//**Simulated processing sequence for Question 1**</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//define bar once</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//redefine it</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">8</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//return its invocation</span></span><br><span class="line">    <span class="keyword">return</span> bar(); <span class="comment">//8</span></span><br><span class="line">&#125;</span><br><span class="line">alert(foo());</span><br></pre></td></tr></table></figure>
<h1 id="Question_2">Question 2</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> bar = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> bar();</span><br><span class="line">    <span class="keyword">var</span> bar = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">8</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line">alert(foo());</span><br></pre></td></tr></table></figure>
<p>Do Function Expressions get Hoisted too?</p>
<p><strong> That depends on the expression. </strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> bar = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>The left hand side (var bar) is a Variable Declaration. Variable Declarations get hoisted but their Assignment Expressions don’t. So when bar is hoisted the interpreter initially sets var bar = undefined. The function definition itself is not hoisted.</p>
<p>Thus the code in Question 2 runs in a more intuitive sequence:<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//**Simulated processing sequence for Question 2**</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//a declaration for each function expression</span></span><br><span class="line">    <span class="keyword">var</span> bar = <span class="literal">undefined</span>;</span><br><span class="line">    <span class="keyword">var</span> bar = <span class="literal">undefined</span>;</span><br><span class="line">    <span class="comment">//first Function Expression is executed</span></span><br><span class="line">    bar = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// Function created by first Function Expression is invoked</span></span><br><span class="line">    <span class="keyword">return</span> bar();</span><br><span class="line">    <span class="comment">// second Function Expression unreachable</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(foo()); <span class="comment">//3</span></span><br></pre></td></tr></table></figure></p>
<h1 id="Question_3">Question 3</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(foo());</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> bar = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> bar();</span><br><span class="line">    <span class="keyword">var</span> bar = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">8</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//a declaration for each function expression</span></span><br><span class="line">    <span class="keyword">var</span> bar = <span class="literal">undefined</span>;</span><br><span class="line">    <span class="keyword">var</span> bar = <span class="literal">undefined</span>;</span><br><span class="line">    <span class="comment">//first Function Expression is executed</span></span><br><span class="line">    bar = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// Function created by first Function Expression is invoked</span></span><br><span class="line">    <span class="keyword">return</span> bar();</span><br><span class="line">    <span class="comment">// second Function Expression unreachable</span></span><br><span class="line">&#125;</span><br><span class="line">alert(foo());</span><br></pre></td></tr></table></figure>
<h1 id="Question_4">Question 4</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> bar();</span><br><span class="line">    <span class="keyword">var</span> bar = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">var</span> bar = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">8</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line">alert(foo());</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//**Simulated processing sequence for Question 4**</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//a declaration for each function expression</span></span><br><span class="line">    <span class="keyword">var</span> bar = <span class="literal">undefined</span>;</span><br><span class="line">    <span class="keyword">var</span> bar = <span class="literal">undefined</span>;</span><br><span class="line">    <span class="keyword">return</span> bar(); <span class="comment">//TypeError: "bar not defined"</span></span><br><span class="line">    <span class="comment">//neither Function Expression is reached</span></span><br><span class="line">&#125;</span><br><span class="line">alert(foo());</span><br></pre></td></tr></table></figure></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2018/01/27/rxjs/" itemprop="url">
                rxjs
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2018-01-27T13:14:04+00:00" content="2018-01-27">
            2018-01-27
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>RxJS 入门指引和初步应用</p>
<p><a href="https://zhuanlan.zhihu.com/p/25383159" target="_blank" rel="external">https://zhuanlan.zhihu.com/p/25383159</a></p>
<p>RxJS提供了各种API来创建数据流：</p>
<p>单值：of, empty, never<br>多值：from<br>定时：interval, timer<br>从事件创建：fromEvent<br>从Promise创建：fromPromise<br>自定义创建：create<br>创建出来的数据流是一种可观察的序列，可以被订阅，也可以被用来做一些转换操作，比如：</p>
<p>改变数据形态：map, mapTo, pluck<br>过滤一些值：filter, skip, first, last, take<br>时间轴上的操作：delay, timeout, throttle, debounce, audit, bufferTime<br>累加：reduce, scan<br>异常处理：throw, catch, retry, finally<br>条件执行：takeUntil, delayWhen, retryWhen, subscribeOn, ObserveOn<br>转接：switch<br>也可以对若干个数据流进行组合：</p>
<p>concat，保持原来的序列顺序连接两个数据流<br>merge，合并序列<br>race，预设条件为其中一个数据流完成<br>forkJoin，预设条件为所有数据流都完成<br>zip，取各来源数据流最后一个值合并为对象<br>combineLatest，取各来源数据流最后一个值合并为数组</p>
<p>在RxJS中，存在这么几种东西：</p>
<p>Observable 可观察序列，只出不进<br>Observer 观察者，只进不出<br>Subject 可出可进的可观察序列，可作为观察者<br>ReplaySubject 带回放<br>Subscription 订阅关系</p>
<p>前三种东西，根据它们数据进出的可能性，可以通俗地理解他们的连接方式，这也就是所谓管道的“形状”，一端密闭一端开头，还是两端开口，都可以用来辅助记忆。</p>
<p>上面提到的Subscription，则是订阅之后形成的一个订阅关系，可以用于取消订阅。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Observable.interval(1000).subscribe(() =&#62; &#123;&#10;  this.diff = moment(createAt).fromNow()&#10;&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">const timeA$ = Observable.interval(1000)&#10;const timeB$ = timeA$.filter(num =&#62; &#123;&#10;    return (num % 2 != 0)&#10;      &#38;&#38; (num % 3 != 0)&#10;      &#38;&#38; (num % 5 != 0)&#10;      &#38;&#38; (num % 7 != 0)&#10;  &#125;)&#10;&#10;const timeC$ = timeB$.debounceTime(3000)&#10;const timeD$ = timeC$.delay(2000)&#10;&#10;&#10;A: 0  1  2  3  4  5  6  7  8  9  10 11 12 13 14 15 16 17 18 19 20 21&#10;B:    1                             11    13          17    19&#10;C:          1                                   13                19&#10;D:                1                                   13</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">const &#20061;&#38452;&#30495;&#32463; = &#39;&#22825;&#20043;&#36947;&#65292;&#25439;&#26377;&#20313;&#32780;&#34917;&#19981;&#36275;&#39;&#10;&#10;const &#40644;&#33993;$ = new ReplaySubject(Number.MAX_VALUE)&#10;const &#37101;&#38742;$ = new ReplaySubject(3)&#10;&#10;const &#35835;&#20070;$ = Observable.from(&#20061;&#38452;&#30495;&#32463;.split(&#39;&#39;))&#10;&#10;&#35835;&#20070;$.subscribe(&#40644;&#33993;$)&#10;&#35835;&#20070;$.subscribe(&#37101;&#38742;$)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">const action$ = new Subject()&#10;const reducer = (state, payload) =&#62; &#123;&#10;  // &#25226;payload&#21472;&#21152;&#21040;state&#19978;&#36820;&#22238;&#10;&#125;&#10;&#10;const state$ = action$.scan(reducer)&#10;  .startWith(&#123;&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">const meAction$ = new Subject()&#10;const meReducer = (state, payload) =&#62; &#123;&#125;&#10;&#10;const articleAction$ = new Subject()&#10;const articleReducer = (state, payload) =&#62; &#123;&#125;&#10;&#10;const me$ = meAction$.scan(meReducer).startWith(&#123;&#125;)&#10;const article$ = articleAction$.scan(articleReducer).startWith(&#123;&#125;)&#10;&#10;const state$ = Observable&#10;  .zip(&#10;    me$,&#10;    article$,&#10;    (me, article) =&#62; &#123;me, article&#125;&#10;  )&#10;  &#10;const editable$ = Observable.combineLatest(article$, me$)&#10;  .map(arr =&#62; &#123;&#10;    let [article, me] = arr&#10;    return me.isAdmin || article.author === me.id&#10;  &#125;)</span><br></pre></td></tr></table></figure>
<h1 id="示例五：幸福人生">示例五：幸福人生</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">// &#24037;&#36164;&#22987;&#32456;&#19981;&#28072;&#10;const salary$ = Observable.interval(100).mapTo(2)&#10;&#10;// &#25379;&#38065;&#26159;&#20026;&#20102;&#20080;&#25151;&#65292;&#20080;&#25151;&#26159;&#20026;&#20102;&#36186;&#38065;&#10;const house$ = new Subject()&#10;&#10;const houseCount$ = house$.scan((acc, num) =&#62; acc + num, 0).startWith(0)&#10;&#10;const rent$ = Observable.interval(3000)&#10;  .withLatestFrom(houseCount$)&#10;  .map(arr =&#62; arr[1] * 5)&#10;  &#10;/*&#10;&#35299;&#37322;&#19968;&#19979;&#19978;&#38754;&#36825;&#27573;&#20195;&#30721;&#65306;&#10;&#10;&#25151;&#31199;&#30001;&#25151;&#31199;&#21608;&#26399;&#30340;&#23450;&#26102;&#22120;&#35302;&#21457;&#10;&#28982;&#21518;&#21040;&#25151;&#23376;&#25968;&#37327;&#20013;&#21462;&#26368;&#21518;&#19968;&#20010;&#20540;&#65292;&#20063;&#23601;&#26159;&#24403;&#21069;&#26377;&#22810;&#23569;&#22871;&#25151;&#10;&#28982;&#21518;&#65292;&#29992;&#25151;&#23376;&#25968;&#37327;&#20056;&#20197;&#21333;&#22871;&#25151;&#30340;&#26376;&#31199;&#65292;&#20551;&#35774;&#26159;5&#10;*/&#10;&#10;// &#19968;&#20080;&#20102;&#25151;&#65292;&#23601;&#27809;&#29616;&#37329;&#20102;&#8230;&#8230;&#10;const income$ = Observable.merge(salary$, rent$);&#10;&#10;const cash$ = income$&#10;  .scan((acc, num) =&#62; &#123;&#10;    const newSum = acc + num&#10;&#10;    const newHouse = Math.floor(newSum / 100)&#10;    if (newHouse &#62; 0) &#123;&#10;      house$.next(newHouse)&#10;    &#125;&#10;&#10;    return newSum % 100&#10;  &#125;, 0);&#10;  &#10;`&#10;/*&#10;&#10;&#32047;&#31215;&#20043;&#21069;&#30340;&#29616;&#37329;&#27969;&#19982;&#26412;&#27425;&#25910;&#20837;&#10;&#20551;&#23450;&#25151;&#20215;100&#65292;&#20808;&#30475;&#30475;&#29616;&#37329;&#22815;&#20080;&#20960;&#22871;&#25151;&#65292;&#33021;&#20080;&#20960;&#22871;&#20080;&#20960;&#22871;&#10;&#37325;&#26032;&#35745;&#31639;&#20080;&#23436;&#20043;&#21518;&#30340;&#29616;&#37329;&#10;*/</span><br></pre></td></tr></table></figure>
<p>Hello RxJS</p>
<p><a href="https://zhuanlan.zhihu.com/p/23331432" target="_blank" rel="external">https://zhuanlan.zhihu.com/p/23331432</a></p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/">&raquo;</a>
  </nav>

 </div>

        

        
      </div>

      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      <section class="site-overview">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="css/images/1035498.gif" alt="Chandler" itemprop="image"/>
          <p class="site-author-name" itemprop="name">Chandler</p>
        </div>
        <p class="site-description motion-element" itemprop="description">Chandler's Blog</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">53</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            
              <span class="site-state-item-count">0</span>
              <span class="site-state-item-name">categories</span>
              
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">29</span>
              <span class="site-state-item-name">tags</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner"> <div class="copyright" >
  
  &copy; &nbsp; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="icon-next-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Chandler</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


 </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  
  
    
    

  


  
  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.1"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.1"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.5.1" id="motion.global"></script>




  <script type="text/javascript" src="/js/nav-toggle.js?v=0.4.5.1"></script>
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  

  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
      if (isMobile()) {
        FastClick.attach(document.body);
      }
    });
  </script>

  

  
  

  
  <script type="text/javascript" src="/js/lazyload.js"></script>
  <script type="text/javascript">
    $(function () {
      $("#posts").find('img').lazyload({
        placeholder: "/images/loading.gif",
        effect: "fadeIn"
      });
    });
  </script>
</body>
</html>
