<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>



  <link href='//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext' rel='stylesheet' type='text/css'>


<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.5.1"/>


    <meta name="description" content="Chandler's Blog" />



  <meta name="keywords" content="Hexo,next" />





  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.1" />


<meta name="description" content="Chandler&apos;s Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Amateur Programming">
<meta property="og:url" content="http://github.com/ttma1046/page/3/index.html">
<meta property="og:site_name" content="Amateur Programming">
<meta property="og:description" content="Chandler&apos;s Blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Amateur Programming">
<meta name="twitter:description" content="Chandler&apos;s Blog">


<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'post'
  };
</script>

  <title> Amateur Programming </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  



  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand" rel="start">
      <span class="logo">
        <i class="icon-next-logo"></i>
      </span>
      <span class="site-title">Amateur Programming</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon icon-next-home"></i> <br />
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            <i class="menu-item-icon icon-next-archives"></i> <br />
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            <i class="menu-item-icon icon-next-tags"></i> <br />
            Tags
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content"> 
  <section id="posts" class="posts-expand">
    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/11/20/essentialcsharpchaptereleven/" itemprop="url">
                Essential C# 5.0 Note - Chapter 11 - Generics
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-11-20T03:46:50+00:00" content="2015-11-20">
            2015-11-20
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><h3 id="Benefits_of_Generics">Benefits of Generics</h3><p>There are several advantages to using a generic class over a nongeneric version (such as the System.Collections.Generic.Stack<t> class used earlier instead of the original System.Collections.Stack type).</t></p>
<ol>
<li><p><strong> Generics facilitate increased type safety </strong>, preventing data types other than those explicitly intended by the members within the parameterized class.<br> In Listing 11.7, the parameterized stack class restricts you to the Cell data type when using Stack<cell>. (For example, the statement path.Push(“garbage”) produces a compile-time error indicating that there is no overloaded method for System.Collections.Generic.Stack<t>.Push(T) that can work with the string, because it cannot be converted to a Cell.)</t></cell></p>
</li>
<li><p>Compile-time type checking reduces the likelihood of InvalidCastException type errors at runtime.</p>
</li>
<li><p>Using value types with generic class members no longer causes a boxing conversion to object. (For example, path.Pop() and path.Push() do not require an item to be boxed when added or unboxed when removed.)</p>
</li>
<li><p>Generics in C# reduce code bloat. Generic types retain the benefits of specific class versions, without the overhead. (For example, it is no longer necessary to define a class such as CellStack.)</p>
</li>
<li><p>Performance improves because casting from an object is no longer required, thus eliminating a type check operation. Also, performance improves because boxing is no longer necessary for value types.</p>
</li>
<li><p>Generics reduce memory consumption by avoiding boxing and thus consuming less memory on the heap.</p>
</li>
<li><p>Code becomes more readable because of fewer casting checks and because of the need for fewer type-specific implementations.</p>
</li>
<li><p>Editors that assist coding via some type of IntelliSense® work directly with return parameters from generic classes. There is no need to cast the return data for IntelliSense to work.</p>
</li>
</ol>
<p>At their core, generics offer the ability to code pattern implementations and then reuse those implementations wherever the patterns appear. Patterns describe problems that occur repeatedly within code, and templates provide a single implementation for these repeating patterns.</p>
<h3 id="Generics_with_constraints">Generics with constraints</h3><p>where T : iInterface, new()</p>
<h4 id="Interface_Constraints">Interface Constraints</h4><figure class="highlight"><table><tr><td class="code"><pre><span class="line">public class BinaryTree&lt;T&gt;</span><br><span class="line">   where T: System.IComparable&lt;T&gt;</span><br></pre></td></tr></table></figure>
<h4 id="Class_Type_Constraints">Class Type Constraints</h4><figure class="highlight"><table><tr><td class="code"><pre><span class="line">public class EntityDictionary&lt;TKey, TValue&gt;</span><br><span class="line">    : System.Collections.Generic.Dictionary&lt;TKey, TValue&gt;</span><br><span class="line">    where TValue : EntityBase</span><br><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Similarly, base class constraints cannot specify sealed classes or nonclass types. For example, C# does not allow a type parameter to be constrained to string or System.Nullable<t> because there would then be only one possible type argument for that type parameter.</t></p>
<p>Certain “special” types are not legal as class type constraints.</p>
<h4 id="Struct/Class_Constraints">Struct/Class Constraints</h4><p><em><code>class</code> constraint restricts it to reference types. e.g. any class, interface, delegate, or array type.
</em><code>struct</code> constraint - Nullable value types do not satisfy the constraint.</p>
<p>Why? </p>
<p>Nullable value types are implemented as the generic type Nullable<t>, which itself applies the struct constraint to T. If nullable value types satisfied that constraint, it would be possible to define the nonsense type Nullable<nullable<int>&gt;. A doubly nullable integer is confusing to the point of being meaningless. (As expected, the shorthand syntax int?? is also disallowed.)</nullable<int></t></p>
<h4 id="Multiple_Constraints">Multiple Constraints</h4><figure class="highlight"><table><tr><td class="code"><pre><span class="line">public class EntityDictionary&lt;TKey, TValue&gt;</span><br><span class="line">    : Dictionary&lt;TKey, TValue&gt;</span><br><span class="line">    where TKey : IComparable&lt;TKey&gt;, IFormattable</span><br><span class="line">    where TValue : EntityBase</span><br><span class="line">&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>When specifying multiple constraints on one type parameter, an <strong>AND</strong> relationship is assumed. </p>
<p>If a type C is supplied as the type argument for TKey, C must implement IComparable<c> and IFormattable, for example.</c></p>
<h4 id="Constructor_Constraints">Constructor Constraints</h4><figure class="highlight"><table><tr><td class="code"><pre><span class="line">public class EntityBase&lt;TKey&gt;</span><br><span class="line">&#123;</span><br><span class="line">    public TKey Key</span><br><span class="line">    &#123;</span><br><span class="line">        get&#123; return _Key;  &#125;</span><br><span class="line">        set&#123; _Key = value; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    private TKey _Key;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class EntityDictionary&lt;TKey, TValue&gt; :</span><br><span class="line">    Dictionary&lt;TKey, TValue&gt;</span><br><span class="line">    where TKey: IComparable&lt;TKey&gt;, IFormattable</span><br><span class="line">    where TValue : EntityBase&lt;TKey&gt;, new()</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    // ...</span><br><span class="line"></span><br><span class="line">    public TValue MakeValue(TKey key)</span><br><span class="line">    &#123;</span><br><span class="line">        TValue newEntity = new TValue();</span><br><span class="line"></span><br><span class="line">        newEntity.Key = key;</span><br><span class="line">        Add(newEntity.Key, newEntity);</span><br><span class="line">        return newEntity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Constructor constraint</strong>, and it requires the type argument corresponding to the constrained type parameter to have a public default constructor.</p>
<p>Only the <strong>default constructor</strong> constraint is available. </p>
<p>You cannot specify a constraint that ensures that the type argument supplied provides a constructor that takes formal parameters.</p>
<h4 id="Constraint_Inheritance">Constraint Inheritance</h4><p><strong>Neither</strong> generic type parameters <strong>nor</strong> their constraints are inherited by a derived class, because generic type parameters are not members. </p>
<p>(Remember, class inheritance is the property that the derived class has all of the members of the base class.)</p>
<p>It is a common practice to make new generic types that inherit from other generic types. </p>
<p>Since the type parameters of the derived generic type are now the type arguments of the generic base class, the type parameters must have equal (or stronger) constraints as those on the base class.</p>
<p>Confused? Consider Listing 11.27.</p>
<p>Listing 11.27. Inherited Constraints Specified Explicitly</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">class EntityBase&lt;T&gt; where T : IComparable&lt;T&gt;</span><br><span class="line">&#123;</span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class EntityBase</span><br><span class="line">&#123;</span><br><span class="line">    // ...</span><br><span class="line">    public virtual void Method&lt;U&gt;(U u) where U : IComparable&lt;U&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        // ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Order : EntityBase</span><br><span class="line">&#123;</span><br><span class="line">    public override void Method&lt;T&gt;(T t) // where T : IComparable&lt;T&gt;</span><br><span class="line">    //    Constraints may not be repeated on overriding</span><br><span class="line">    //    members</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line">        // ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line">// ERROR:</span><br><span class="line">// The type 'U' must be convertible to</span><br><span class="line">// 'System.IComparable&lt;U&gt;' in order to use it as parameter</span><br><span class="line">// 'T' in the generic type or method.</span><br><span class="line">class Entity&lt;U&gt; : EntityBase&lt;U&gt; where U : IComparable&lt;U&gt;</span><br><span class="line">&#123;</span><br><span class="line">    //...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>But briefly, methods may also be generic and may also place constraints on the type arguments supplied for their type parameters. </p>
<p>How, then, are constraints handled when a virtual generic method is inherited and overridden? </p>
<p>In contrast to the situation with type parameters declared on a generic class, constraints on overriding virtual generic methods (or explicit interface) methods are inherited implicitly and may not be restated.</p>
<p><strong>Repeating Inherited Constraints on Virtual Members Is Prohibited</strong></p>
<p>In the generic class inheritance case, the type parameter on the derived class can be additionally constrained by adding not only the constraints on the base class (required), but also additional constraints as well. </p>
<p>However, overriding virtual generic methods need to conform exactly to the constraints defined by the base class method. </p>
<p>Additional constraints could break polymorphism, so they are not allowed and the type parameter constraints on the overriding method are implied.In</p>
<h4 id="Advanced_Topic:_Constraint_Limitations">Advanced Topic: Constraint Limitations</h4><p><strong>Constraints are appropriately limited to avoid nonsensical code.</strong></p>
<ol>
<li><p>Cannot combine a class type constraint with a struct or class constraint.</p>
</li>
<li><p>Cannot specify constraints to restrict inheritance to special types such as <strong>object</strong>, <strong>arrays</strong>, <strong>System.ValueType</strong>, <strong>System.Enum (enum)</strong>, <strong>System.Delegate</strong>, and <strong>System.MulticastDelegate</strong>.</p>
</li>
<li><p>Operator Constraints Are Not Allowed</p>
</li>
</ol>
<p>You cannot constrain a type parameter to a type that implements a particular method or operator, except via interface type constraints (for methods) or class type constraints (for methods and operators). </p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">public abstract class MathEx&lt;T&gt;</span><br><span class="line">&#123;</span><br><span class="line">    public static T Add(T first, T second)</span><br><span class="line">    &#123;</span><br><span class="line">        // Error: Operator '+' cannot be applied to</span><br><span class="line">        // operands of type 'T' and 'T'.</span><br><span class="line">        return first + second;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>More generally, there is no way to constrain a type to have a static method.</strong></p>
<ol>
<li>OR Criteria Are Not Supported</li>
</ol>
<p>If you supply multiple interfaces or class constraints for a type parameter, the compiler always assumes an AND relationship between constraints.If</p>
<p>There is no way to specify an OR relationship between constraints.</p>
<p>Supporting this would prevent the compiler from resolving which method to call at compile time.</p>
<ol>
<li>Constraints of Type Delegate and Enum Are Not Valid</li>
</ol>
<p>Delegate types, array types, and enumerated types may not be used as class type constraints, because they are all effectively “sealed” types.</p>
<p>Their base types, System.Delegate, System.MultiCastDelegate, System.Array, and System.Enum, may also not be used as constraints.</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">public class Publisher&lt;T&gt;</span><br><span class="line">    where T : System.Delegate</span><br><span class="line">&#123;</span><br><span class="line">    public event T Event;</span><br><span class="line">    public void Publish()</span><br><span class="line">    &#123;</span><br><span class="line">        if (Event != null)</span><br><span class="line">        &#123;</span><br><span class="line">            Event(this, new EventArgs());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>All delegate types are considered special classes that cannot be specified as type parameters. </p>
<p>Doing so would prevent compile-time validation on the call to Event() because the signature of the event firing is unknown with the data types <code>System.Delegate</code> and <code>System.MulticastDelegate</code>.</p>
<p>The same restriction occurs for any <code>enum</code> type.</p>
<p>6.Constructor Constraints Are Allowed Only for Default Constructors</p>
<p>There is no constraint to force the type argument to provide a constructor that takes other formal parameters.</p>
<p>One way to circumvent this restriction is to supply a factory interface that includes a method for instantiating the type.</p>
<p>The factory implementing the interface takes responsibility for instantiating the entity rather than the <code>EntityDictionary</code> itself</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">public class EntityBase&lt;TKey&gt;</span><br><span class="line">&#123;</span><br><span class="line">  public EntityBase(TKey key)</span><br><span class="line">  &#123;</span><br><span class="line">      Key = key;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  public TKey Key</span><br><span class="line">  &#123;</span><br><span class="line">      get &#123; return _key; &#125;</span><br><span class="line">      set &#123; _key = value; &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  private TKey _key;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class EntityDictionary&lt;TKey, TValue, TFactory&gt; :</span><br><span class="line">      Dictionary&lt;TKey, TValue&gt;</span><br><span class="line">  where TKey : IComparable&lt;TKey&gt;, IFormattable</span><br><span class="line">  where TValue : EntityBase&lt;TKey&gt;</span><br><span class="line">  where TFactory : IEntityFactory&lt;TKey, TValue&gt;, new()</span><br><span class="line">&#123;</span><br><span class="line">  ...</span><br><span class="line">  public TValue New(TKey key)</span><br><span class="line">  &#123;</span><br><span class="line">      TFactory factory = new TFactory();</span><br><span class="line">      TValue newEntity = factory.CreateNew(key);</span><br><span class="line"></span><br><span class="line">      Add(newEntity.Key, newEntity);</span><br><span class="line">      return newEntity;</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public interface IEntityFactory&lt;TKey, TValue&gt;</span><br><span class="line">&#123;</span><br><span class="line">    TValue CreateNew(TKey key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class Order : EntityBase&lt;Guid&gt;</span><br><span class="line">&#123;</span><br><span class="line">  public Order(Guid key) :</span><br><span class="line">      base(key)</span><br><span class="line">  &#123;</span><br><span class="line">      // ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class OrderFactory : IEntityFactory&lt;Guid, Order&gt;</span><br><span class="line">&#123;</span><br><span class="line">  public Order CreateNew(Guid key)</span><br><span class="line">  &#123;</span><br><span class="line">      return new Order(key);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Generic_Methods">Generic Methods</h3><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">MathEx</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> T Max&lt;T&gt;(T first, <span class="keyword">params</span> T[] values)</span><br><span class="line">        <span class="keyword">where</span> T : IComparable&lt;T&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        T maximum = first;</span><br><span class="line">        <span class="keyword">foreach</span> (T item <span class="keyword">in</span> values)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (item.CompareTo(maximum) &gt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                maximum = item;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maximum;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> T Min&lt;T&gt;(T first, <span class="keyword">params</span> T[] values)</span><br><span class="line">        <span class="keyword">where</span> T : IComparable&lt;T&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        T minimum = first;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">foreach</span> (T item <span class="keyword">in</span> values)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (item.CompareTo(minimum) &lt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                minimum = item;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> minimum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Generic_Method_Type_Inference">Generic Method Type Inference</h4><p>In cases where method type inference is still not sophisticated enough to deduce the type arguments, you can resolve the error by either inserting casts on the arguments that clarify to the compiler the argument types that should be used in the inferences, or giving up on type inferencing and including the type arguments explicitly.</p>
<p>Also note that when making its inferences, the method type inference algorithm considers only the arguments, the arguments’ types, and the formal parameter types of the generic method.</p>
<p>Other factors that could in practice be used in the analysis—such as the return type of the generic method, the type of the variable that the method’s returned value is being assigned to, or the constraints on the method’s generic type parameters—are not considered at all by the method type inference algorithm.</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">MathEx</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> T Max&lt;T&gt;(T first, <span class="keyword">params</span> T[] values)</span><br><span class="line">        <span class="keyword">where</span> T : IComparable&lt;T&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        T maximum = first;</span><br><span class="line">        <span class="keyword">foreach</span> (T item <span class="keyword">in</span> values)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (item.CompareTo(maximum) &gt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                maximum = item;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maximum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> T Max&lt;T, V&gt;(T first, V second, V[] seconds, <span class="keyword">params</span> T[] values)</span><br><span class="line">        <span class="keyword">where</span> T : IComparable&lt;T&gt;</span><br><span class="line">        <span class="keyword">where</span> V : IComparable&lt;V&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        T maximum = first;</span><br><span class="line">        <span class="keyword">foreach</span> (T item <span class="keyword">in</span> values)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (item.CompareTo(maximum) &gt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                maximum = item;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maximum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> T Min&lt;T&gt;(T first, <span class="keyword">params</span> T[] values)</span><br><span class="line">        <span class="keyword">where</span> T : IComparable&lt;T&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        T minimum = first;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">foreach</span> (T item <span class="keyword">in</span> values)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (item.CompareTo(minimum) &lt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                minimum = item;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> minimum;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"></span>)</span><br><span class="line">    </span>&#123;</span><br><span class="line">        Console.WriteLine(MathEx.Max&lt;<span class="keyword">int</span>&gt;(<span class="number">7</span>, <span class="number">490</span>));</span><br><span class="line"></span><br><span class="line">        Console.WriteLine(MathEx.Min&lt;<span class="keyword">string</span>&gt;(<span class="string">"R.O.U.S."</span>, <span class="string">"Fireswamp"</span>));</span><br><span class="line"></span><br><span class="line">        Console.WriteLine(MathEx.Max(<span class="number">7</span>, <span class="number">490</span>)); <span class="comment">// No type arguments!</span></span><br><span class="line">        </span><br><span class="line">        Console.WriteLine(MathEx.Min(<span class="string">"R.O.U.S'"</span>, <span class="string">"Fireswamp"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Specifying_Constraints">Specifying Constraints</h4><p>Type parameters of generic methods may be constrained in exactly the same way that type parameters of generic types are constrained.Constraints</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> Show&lt;T&gt;(BinaryTree&lt;T&gt; tree, <span class="keyword">int</span> indent) <span class="keyword">where</span> T :  IComparable&lt;T&gt;</span><br><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Notice that the Show<t> implementation itself does not directly use any member of the IComparable<t> interface, so you might wonder why the constraint is required. Recall, however, that the BinaryTree<t> class did require this</t></t></t></p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">public class BinaryTree&lt;T&gt;</span><br><span class="line">    where T: System.IComparable&lt;T&gt;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Because the BinaryTree<t> class requires this constraint on its T, and because Show<t> uses its T as a type argument corresponding to a constrained type parameter, Show<t> needs to ensure that the class’s type parameter’s constraint is met on its method type argument.</t></t></t></p>
<h4 id="Advanced_Topic:_Casting_insdie_a_Generic_Method">Advanced Topic: Casting insdie a Generic Method</h4><p><strong>Sometimes you should be wary of using generics</strong></p>
<p>Advanced Topic: Casting inside a Generic Method</p>
<p>Sometimes you should be wary of using generics—for instance, when using them specifically to bury a cast operation. Consider the following method, which converts a stream into an object of a given type:</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> T Deserialize&lt;T&gt;(</span><br><span class="line">     Stream stream, IFormatter formatter)</span><br><span class="line">&#123;</span><br><span class="line">     <span class="keyword">return</span> (T)formatter.Deserialize(stream);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The formatter is responsible for removing data from the stream and converting it to an object. The Deserialize() call on the formatter returns data of type object. A call to use the generic version of Deserialize() looks something like this:<br><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">string</span> greeting =</span><br><span class="line">    Deserialization.Deserialize&lt;<span class="keyword">string</span>&gt;(stream, formatter);</span><br></pre></td></tr></table></figure></p>
<p>The problem with this code is that to the caller of the method, Deserialize<t>() appears to be type-safe. However, a cast operation is still performed on behalf of the caller, as in the case of the nongeneric equivalent shown here:<br><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">string</span> greeting =</span><br><span class="line">    (<span class="keyword">string</span>)Deserialization.Deserialize(stream, formatter);</span><br></pre></td></tr></table></figure></t></p>
<p>The cast could fail at runtime; the method might not be as type-safe as it appears. The Deserialize<t> method is generic solely so that it can hide the existence of the cast from the caller, which seems dangerously deceptive. It might be better for the method to be nongeneric and return object, making the caller aware that it is not type-safe. Developers should use care when casting in generic methods if there are no constraints to verify cast validity.</t></p>
<blockquote>
<p>Guidelines</p>
<p><strong>AVOID misleading the caller with generic methods that are not as type-safe as they appear.</strong></p>
</blockquote>
<h3 id="Covariance_and_Contravariance">Covariance and Contravariance</h3><p>A common question asked by new users of generic types is why an expression of type List<string> may not be assigned to a variable of type List<object>—if a string may be converted to type object, surely a list of strings is similarly compatible with a list of objects. But this is not, generally speaking, either type-safe or legal. </object></string></p>
<p>If you declare two variables with different type parameters using the same generic class, the variables are not type-compatible even if they are assigning from a more specific type to a more generic type—in other words, they are not covariant.</p>
<p>Covariant is a technical term from category theory, but the idea is straightforward: Suppose two types X and Y have a special relationship, namely that every value of the type X may be converted to the type Y. If the types I<x> and I<y> always also have that same special relationship, we say, “I<t> is covariant in T.” When dealing with simple generic types with only one type parameter, the type parameter can be understood and we simply say, “I<t> is covariant.” The conversion from I<x> to I<y> is called a covariant conversion.</y></x></t></t></y></x></p>
<p>For example, instances of a generic class, Pair<contact> and Pair<pdaitem>, are not type-compatible even when the type arguments are themselves compatible. In other words, the compiler prevents converting (implicitly or explicitly) Pair<contact> to Pair<pdaitem>, even though Contact derives from PdaItem. Similarly, converting Pair<contact> to the interface type IPair<pdaitem> will also fail.For</pdaitem></contact></pdaitem></contact></pdaitem></contact></p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="comment">// Error: Cannot convert type ...</span></span><br><span class="line">Pair&lt;PdaItem&gt; pair = (Pair&lt;PdaItem&gt;) <span class="keyword">new</span> Pair&lt;Contact&gt;();</span><br><span class="line">IPair&lt;PdaItem&gt; duple = (IPair&lt;PdaItem&gt;) <span class="keyword">new</span> Pair&lt;Contact&gt;();</span><br></pre></td></tr></table></figure>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line">Contact contact1 = <span class="keyword">new</span> Contact(<span class="string">"Princess Buttercup"</span>),</span><br><span class="line">Contact contact2 = <span class="keyword">new</span> Contact(<span class="string">"Inigo Montoya"</span>);</span><br><span class="line">Pair&lt;Contact&gt; contacts = <span class="keyword">new</span> Pair&lt;Contact&gt;(contact1, contact2);</span><br><span class="line"></span><br><span class="line"><span class="comment">// This gives an error: Cannot convert type ...</span></span><br><span class="line"><span class="comment">// But suppose it did not.</span></span><br><span class="line"><span class="comment">// IPair&lt;PdaItem&gt; pdaPair = (IPair&lt;PdaItem&gt;) contacts;</span></span><br><span class="line"><span class="comment">// This is perfectly legal, but not type safe.</span></span><br><span class="line"><span class="comment">// pdaPair.First = new Address("123 Sesame Street");</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>An IPair<pdaitem> can contain an address, but the object is really a Pair<contact> that can only contain contacts, not addresses. </contact></pdaitem></p>
<p>Type safety is completely violated if unrestricted generic covariance is allowed</p>
<p>Now it should also be clear why a list of strings may not be used as a list of objects; you cannot insert an integer into a list of strings, but you can insert an integer into a list of objects, so it must be illegal to cast a list of strings to a list of objects so that this error can be prevented by the compiler.Contact</p>
<h4 id="out"><code>out</code></h4><p>Support for safe covariance was added to C# 4. To indicate that a generic interface is intended to be covariant in one of its type parameters, declare the type parameter with the out type parameter modifier.</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">interface IReadOnlyPair&lt;out T&gt;</span><br><span class="line">&#123;</span><br><span class="line">  T First &#123; get; &#125;</span><br><span class="line">  T Second &#123; get; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>There are a number of important restrictions on covariant conversions.</p>
<p>*Only generic interfaces and generic delegates (described in Chapter 12) may be covariant. Generic classes and structs are never covariant.</p>
<p>*The varying type arguments of both the “source” and “target” generic types must be reference types, not value types. That is, an IReadOnlyPair<string> may be converted covariantly to IReadOnlyPair<object> because both string and IReadOnlyPair<object> are reference types. An IReadOnlyPair<int> may not be converted to IReadOnlyPair<object> because int is not a reference type.</object></int></object></object></string></p>
<p>*The interface or delegate must be declared as supporting covariance, and the compiler must be able to verify that the annotated type parameters are in fact used in only “output” positions.IReadOnlyPair</p>
<h4 id="Generic_Internals">Generic Internals</h4><p>Given the discussions in earlier chapters about the prevalence of objects within the CLI type system, it is no surprise that generics are also objects. </p>
<p>In fact, the type parameter on a generic class becomes metadata that the runtime uses to build appropriate classes when needed. Generics, therefore, support inheritance, polymorphism, and encapsulation. </p>
<p>With generics, you can define methods, properties, fields, classes, interfaces, and delegates.</p>
<p>To achieve this, generics require support from the underlying runtime. </p>
<p>So, the addition of generics to the C# language is a feature of both the compiler and the platform. </p>
<p><strong>To avoid boxing, for example, the implementation of generics is different for value-based type parameters than for generics with reference type parameters.</strong></p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">.class private auto ansi beforefieldinit&#10;    Stack&#39;1&#60;([mscorlib]System.IComparable)T&#62;&#10;    extends [mscorlib]System.Object&#10;&#123;&#10;    field private !0[ ] items&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>The first notable item is the ‘1 that appears following Stack on the second line. That number is the arity. It declares the number of type parameters that the generic class will require type arguments for. A declaration such as EntityDictionary<tkey, tvalue=""> would have an arity of 2.</tkey,></p>
<p>The second line of the generated CIL shows the constraints imposed upon the class. The T type parameter is decorated with an interface declaration for the IComparable constraint.</p>
<p>If you continue looking through the CIL, you will find that the item’s array declaration of type T is altered to contain a type parameter using “exclamation point notation,” used in the generics-capable version of the CIL. </p>
<p>The exclamation point denotes the presence of the first type parameter specified for the class.</p>
<p>Beyond the inclusion of the arity and type parameter in the class header and the type parameter denoted with exclamation points in code, there is little difference between the CIL generated for a generic class and the CIL generated for a nongeneric class.</p>
<h4 id="Instantiating_Generics_Based_on_Value_Types">Instantiating Generics Based on Value Types</h4><p>When a generic type is first constructed with a value type as a type parameter, the runtime creates a specialized generic type with the supplied type parameter(s) placed appropriately in the CIL. </p>
<p>Therefore, the runtime creates new specialized generic types for each new parameter value type.</p>
<p>You declare two instances of a Stack<int>, both using the code already generated by the runtime for a Stack<int>.</int></int></p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">Stack&lt;<span class="keyword">int</span>&gt; stackOne = <span class="keyword">new</span> Stack&lt;<span class="keyword">int</span>&gt;();</span><br><span class="line">Stack&lt;<span class="keyword">int</span>&gt; stackTwo = <span class="keyword">new</span> Stack&lt;<span class="keyword">int</span>&gt;();</span><br></pre></td></tr></table></figure>
<p>If later in the code, you create another Stack with a different value type substituted for the type parameter (such as a long or a user-defined struct) the runtime generates another version of the generic type. </p>
<p><em>The benefit of specialized value type classes is better performance. 
</em>Furthermore, the code is able to avoid conversions and boxing because each specialized generic class “natively” contains the value type.</p>
<h4 id="Instantiating_Generics_Based_on_Reference_Types">Instantiating Generics Based on Reference Types</h4><p>The first time a generic type is constructed with a reference type, the runtime creates a specialized generic type with object references substituted for type parameters in the CIL, not a specialized generic type based on the type argument.</p>
<p>Each subsequent time a constructed type is instantiated with a reference type parameter, the runtime reuses the previously generated version of the generic type, even if the reference type is different from the first reference type.</p>
<p>This implementation of generics greatly reduces code bloat by reducing to one the number of specialized classes created by the compiler for generic classes of reference types.</p>
<p><strong>Even though the runtime uses the same internal generic type definition when the type parameter on a generic reference type varies, this behavior is superseded if the type parameter is a value type. Dictionary<int, customer="">, Dictionary<guid, order="">, and Dictionary<long, order=""> will require new internal type definitions, for example.</long,></guid,></int,></strong></p>
<h3 id="Static_Class_with_Generics">Static Class with Generics</h3><h4 id="“This”_and_extension_method">“This” and extension method</h4><h3 id="nullable_value">nullable value</h3></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/10/11/30-Days-of-TDD/" itemprop="url">
                30 Days of TDD
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-10-11T09:46:56+00:00" content="2015-10-11">
            2015-10-11
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><blockquote>
<p><strong>Fakes</strong> – A Fake is an object that has some sort of actual working mechanism inside that returns a predictable result, but doesn’t implement the actual production logic.</p>
<p><strong>Stubs</strong> – A Stub is an object that will return a specific result based on a specific set of input. If I tell my stub to return “John Doe” whenever I ask it for the person with ID number 42, than that’s what it will do. However when I ask a stub for a person with an ID number 41, it doesn’t know what to do. Depending on which mocking framework I’m using the stub will either throw an exception or just return a null object. A stub may “remember” some information around how it was called, such as how many times it was called and with what data.</p>
<p><strong>Mocks</strong> – A Mock is a much more sophisticated version of a Stub. It will still return values like a stub, but it can also be programmed with expectations in terms of how many times each method should be called, in which order and with what data. Mocks provide features that ensure that our code under test is using it’s dependencies in a very specific way.</p>
<p><strong>Spy</strong> – A Spy is type of mock that takes an object and instead of creating a new mock object replaces the methods that the tester wants to mock. Spies are great for testing legacy (non TDD code) but you must be very careful as missing something that should have been mocked can have disastrous results</p>
<p><strong>Dummy</strong> – A Dummy is an object that can be passed as a replacement for another object, but is never used. Dummies are essentially placeholders.</p>
</blockquote>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/10/03/frontendtoolingES6/" itemprop="url">
                Front End Tooling (ES6)
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-10-03T09:10:12+00:00" content="2015-10-03">
            2015-10-03
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>-Babeljs</p>
<p>-gulp-babel <a href="https://github.com/babel/gulp-babel">https://github.com/babel/gulp-babel</a></p>
<p>-Babelify - Browserify transform for Babelify<br><a href="https://github.com/babel/babelify">https://github.com/babel/babelify</a></p>
<p>-Browserify require(‘modules’) in the browser by bundling up all of your dependencies<br><a href="http://browserify.org/" target="_blank" rel="external">http://browserify.org/</a></p>
<p>Lint and Style Check</p>
<p>-Jshint<br>-Jscs<br>-ESLint a pluggable linting utility for JavaScript<br><a href="http://eslint.org/" target="_blank" rel="external">http://eslint.org/</a></p>
<p>ES6 Modules<br><a href="http://www.2ality.com/2014/09/es6-modules-final.html" target="_blank" rel="external">http://www.2ality.com/2014/09/es6-modules-final.html</a></p>
<p>ES6 Tools - an aggregation of tooling for using ES6 today</p>
<p>Understanding ES6</p>
<p><a href="https://leanpub.com/understandinges6/read" target="_blank" rel="external">https://leanpub.com/understandinges6/read</a></p>
<p>Exploring ES6</p>
<p><a href="http://exploringjs.com/es6/" target="_blank" rel="external">http://exploringjs.com/es6/</a></p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/09/22/addyosmanisawesomeslides/" itemprop="url">
                Addy Osmani's Awesome Slides
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-09-22T11:49:17+00:00" content="2015-09-22">
            2015-09-22
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p><a href="http://addyosmani.com/" target="_blank" rel="external">Addy Osmani - Engineer at Google working with the Chrome &amp; Polymer teams, Creator of TodoMVC, @Yeoman, Material Design Lite, Web Starter Kit</a></p>
<h3 id="Front-end_Tooling_Workflows_by_Addy_Osmani">Front-end Tooling Workflows by Addy Osmani</h3><script async class="speakerdeck-embed" data-id="14273d704a650132ee711257f47f663a" data-ratio="1.77777777777778" src="//speakerdeck.com/assets/embed.js"></script>


<h3 id="Polymer_Power_Tools_by_Addy_Osmani">Polymer Power Tools by Addy Osmani</h3><script async class="speakerdeck-embed" data-id="4b2cb267e3884260b25812bd740bb7b3" data-ratio="1.77777777777778" src="//speakerdeck.com/assets/embed.js"></script></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/09/22/yuandulongshe-shili/" itemprop="url">
                猿都龙蛇 - 势力
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-09-22T03:24:20+00:00" content="2015-09-22">
            2015-09-22
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p><img src="/gallery/yuandulongshe.jpg" alt="yuandulongshe"></p>
<p>龙旗王朝<br>    -青马武士团<br>    -青猿组 - 祁连山<br>    -贝勒党 - 太子则阳</p>
<p>‘天下卫光’客栈 - 和尚勇</p>
<p>日系集团<br>    -宫崎家族<br>    -坂崎家族<br>        -花蛇武道会<br>    -L氏集团<br>东风堂搏击会<br>西风堂搏击会</p>
<p>佣兵公司</p>
<p>福建帮<br>    -黑虎堂</p>
<p>蒙古部<br>    -青狼帮</p>
<p>武师学堂<br>    -振藩武道</p>
<p>太极餐馆 - 乔开</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/09/21/SOLIDPrinciples/" itemprop="url">
                S.O.L.I.D Principles
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2015-09-21T10:48:11+00:00" content="2015-09-21">
            2015-09-21
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p><a href="http://www.youtube.com/watch?v=gwIS9cZlrhk" target="_blank" rel="external"><img src="/gallery/solid-principles.png" alt="Applying S.O.L.I.D. Principles in .NET/C#"></a></p>
<p><a href="http://www.youtube.com/watch?v=gwIS9cZlrhk" target="_blank" rel="external">Applying S.O.L.I.D. Principles in .NET/C#</a></p>
<h2 id="S_-_SRP_-_Single_responsibility_principle">S - SRP - Single responsibility principle</h2><blockquote>
<p>There can be only one requirement that, when changed, will cause a class to change…</p>
</blockquote>
<h3 id="More_detailed:">More detailed:</h3><blockquote>
<p>When we build a class, we look at all the requirements for our systems, </p>
<p>or all the requirements that affect that class,</p>
<p>and we build in such a way that only one of those requirements will cause ever one class to have to change.</p>
<p>Nouns are classes, verbs are their functions and adjectives are their properties.<br>turn verbs/functions to classes, put different functions into different classes.</p>
</blockquote>
<h3 id="Benefits">Benefits</h3><p>I can switch out components and up other components. Components are really small.<br>Simply to read, simply to use.</p>
<h2 id="O_-_OCP_-_Open/closed_principle">O - OCP - Open/closed principle</h2><blockquote>
<p>Once a class is done, it is done! You do not modify it.</p>
</blockquote>
<h3 id="More_detailed:-1">More detailed:</h3><blockquote>
<p>A changing requirement/Once a requirement changes, you do not modify your class, you do not go in and make changes in your existing class.<br>You creates a new class inheriting from the old class, make changes in the new class instead.</p>
</blockquote>
<h3 id="Meyer_vs-_Polymorphic">Meyer vs. Polymorphic</h3><p>Meyer: You build a class plugged into your system. You build another class which inheritanced from the pervious class then plugged into your system.</p>
<p>Polymorphic: Not nessersaily have to inherited from a specfic implementation, inheriting from abstract base classes or could be implemented in a  interface.</p>
<h3 id="Benfits">Benfits</h3><p>*No need to rework on existing unit tests.</p>
<h2 id="L_-_LSP_-_Liskovs_Substitution_Principle">L - LSP - Liskovs Substitution Principle</h2><blockquote>
<p>Let <strong>q(x)</strong> be a property provable about objects <strong>x</strong> of type <strong>T</strong>. Then <strong>q(y)</strong> should be provable for objects <strong>y</strong> of type <strong>S</strong> where <strong>S</strong> is a subtype of <strong>T</strong>.</p>
</blockquote>
<p>More detailed:</p>
<blockquote>
<p>A subclass should behave in such a way that it will not cause problems when used instead of the superclass.</p>
</blockquote>
<h3 id="Rules:">Rules:</h3><h4 id="1-_Contravariance(n-反[抗，逆]变性，逆[抗]变；_抗变性)_of_method_arguments_in_sub_class">1. Contravariance(n.反[抗，逆]变性，逆[抗]变； 抗变性) of method arguments in sub class</h4><p>if I have a class, then I create a new class that inherits from the old class.<br>I am allowed to change the input arguments to my method in such a way that they accepts a base class of the arguments that my base class accepted.</p>
<p>TL;DR<br><strong>I am allowed to change the input parameters in such a way that any parameters that has ever been passed into the parent type can be passed into the new type.</strong></p>
<h4 id="2-_Covariance(_n-协方差；变异数；协变性；共变性)_of_return_types_in_the_sub_class-">2. Covariance( n.协方差；变异数；协变性；共变性) of return types in the sub class.</h4><p>The return value of my method in my class is allowed be any type is the same as the parent or a discendent class.</p>
<p>TL;DR<br>I am allowed to return anything as long as it somepoint inherits from whatever my base class returns.</p>
<h4 id="3-_No_new_exceptions_types_are_allowed_to_be_thrown,_unless_they_are_sub_classes_of_previously_used_ones-">3. No new exceptions types are allowed to be thrown, unless they are sub classes of previously used ones.</h4><p>Impossible to do in .Net and C#.</p>
<p>TL;DR<br>In your new classes, you are not allowed to introduce new exceptions.</p>
<p>Why?</p>
<p>If you introduced new exceptions, whatever code has been using in other class the base class,  might be prepared to handle whatever exception that class is throwing. </p>
<p>If you introducing new ones, your application might be broken.</p>
<h4 id="4-_Preconditions_cannot_be_strengthened_in_a_subtype-">4. Preconditions cannot be strengthened in a subtype.</h4><p>You can not be excepting things that wasnt excepted in base class.</p>
<h4 id="5-_Postconditions_cannot_be_weakened_in_a_subtype-">5. Postconditions cannot be weakened in a subtype.</h4><p>I am not allowed to change the class in such a way that you can not do things you could do before.</p>
<h4 id="6-_The_history_constraint(n-强制；_限制；_约束)">6. The history constraint(n.强制； 限制； 约束)</h4><p>More Detailed:<br><strong>You can not make an immutable class mutable.</strong></p>
<p>You have a class that can not be changed, you have a property of the class that can not be changed in the base class.<br>You are not allow to change that class in such a way that you can change the value in your new class.</p>
<p>Because any type or any class are using the base class might be excepting that the value can not be changed.<br>If you introduced the possibility to changing it, you might break the application.</p>
<p>The general idea:<br><strong>You should most likely to be possible to take your new class and throw it in and run it through all of your existing unit tests. And they should fail in the way that they break down.</strong> </p>
<h2 id="I_-_ISP_-_Interface_segregation_principle">I - ISP - Interface segregation principle</h2><p>“Clients should not be forced to depend upon interfaces that they don’t use.”</p>
<p>Breaking down interfaces in smaller pieces make them easier to implement, and offers more control over who sees what.</p>
<h2 id="D_-_DIP_-_Dependency_inversion_principle">D - DIP - Dependency inversion principle</h2><p>one should “Depend upon Abstractions. Do not depend upon concretions.”</p>
<p>A. High-level modules should not depend on low-level modules. Both should depend on abstractions.</p>
<p>B. Abstractions should not depend on details. Details should depend on abstractions.tags: [S.O.L.I.D, Object-oriented Programmming]</p>
<p><strong>Without DIP</strong></p>
<p><img src="/gallery/DIPwithout.png" alt="DIPwithout"></p>
<p><strong>With DIP</strong><br><img src="/gallery/DIPwith.png" alt="DIPwith"></p>
<p><strong>With DIP Alternative</strong><br><img src="/gallery/DIPwithalter.png" alt="DIPwith"></p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/">&laquo;</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/4/">&raquo;</a>
  </nav>

 </div>

        

        
      </div>

      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      <section class="site-overview">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="css/images/1035498.gif" alt="Chandler" itemprop="image"/>
          <p class="site-author-name" itemprop="name">Chandler</p>
        </div>
        <p class="site-description motion-element" itemprop="description">Chandler's Blog</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">28</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            
              <span class="site-state-item-count">0</span>
              <span class="site-state-item-name">categories</span>
              
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">25</span>
              <span class="site-state-item-name">tags</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner"> <div class="copyright" >
  
  &copy; &nbsp; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="icon-next-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Chandler</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


 </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  
  
    
    

  


  
  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.1"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.1"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.5.1" id="motion.global"></script>




  <script type="text/javascript" src="/js/nav-toggle.js?v=0.4.5.1"></script>
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  

  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
      if (isMobile()) {
        FastClick.attach(document.body);
      }
    });
  </script>

  

  
  

  
  <script type="text/javascript" src="/js/lazyload.js"></script>
  <script type="text/javascript">
    $(function () {
      $("#posts").find('img').lazyload({
        placeholder: "/images/loading.gif",
        effect: "fadeIn"
      });
    });
  </script>
</body>
</html>
