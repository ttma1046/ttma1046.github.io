<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>



  <link href='//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext' rel='stylesheet' type='text/css'>


<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.5.1"/>


    <meta name="description" content="Chandler's Blog" />



  <meta name="keywords" content="Angular," />





  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.1" />


<meta name="description" content="InjectorA service like HeroService is just a class in Angular until you register it with an Angular dependency injector.
An Angular injector is responsible for creating service instances and injecting">
<meta property="og:type" content="article">
<meta property="og:title" content="Angular Dependency Injection">
<meta property="og:url" content="http://github.com/ttma1046/2018/05/17/angular-dependency-injection/index.html">
<meta property="og:site_name" content="Amateur Programming">
<meta property="og:description" content="InjectorA service like HeroService is just a class in Angular until you register it with an Angular dependency injector.
An Angular injector is responsible for creating service instances and injecting">
<meta property="og:updated_time" content="2018-05-27T11:51:56.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Angular Dependency Injection">
<meta name="twitter:description" content="InjectorA service like HeroService is just a class in Angular until you register it with an Angular dependency injector.
An Angular injector is responsible for creating service instances and injecting">


<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'post'
  };
</script>

  <title> Angular Dependency Injection | Amateur Programming </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  



  <div class="container one-column page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand" rel="start">
      <span class="logo">
        <i class="icon-next-logo"></i>
      </span>
      <span class="site-title">Amateur Programming</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon icon-next-home"></i> <br />
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            <i class="menu-item-icon icon-next-archives"></i> <br />
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            <i class="menu-item-icon icon-next-tags"></i> <br />
            Tags
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content"> 

  <div id="posts" class="posts-expand">
    

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              Angular Dependency Injection
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          Posted on
          <time itemprop="dateCreated" datetime="2018-05-17T11:16:30+00:00" content="2018-05-17">
            2018-05-17
          </time>
        </span>

        

        
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        <span itemprop="articleBody"><h1 id="Injector">Injector</h1><p>A service like HeroService is just a class in Angular until you register it with an Angular dependency injector.</p>
<p>An Angular injector is responsible for creating service instances and injecting them into classes like the HeroListComponent.</p>
<p>You rarely create an Angular injector yourself. Angular creates injectors for you as it executes the app, starting with the root injector that it creates during the bootstrap process.<br>          Injector<br>Provider ————-&gt; Service Instance</p>
<p>Angular doesn’t automatically know how you want to create instances of your services or the injector to create your service. You must configure it by specifying providers for every service.</p>
<p>Providers tell the injector how to create the service. Without a provider, the injector would not know that it is responsible for injecting the service nor be able to create the service.</p>
<p>There are many ways to register a service provider with an injector. This section shows the most common ways of configuring a provider for your services.</p>
<p>Register Provider:</p>
<h2 id="@Injectable_providers">@Injectable providers</h2><p>@Injectable configure a provider for those services.<br><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Injectable &#125; from <span class="string">'@angular/core'</span>;</span><br><span class="line"></span><br><span class="line">@Injectable(&#123;</span><br><span class="line">  providedIn: <span class="string">'root'</span>,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> HeroService &#123;</span><br><span class="line">  <span class="constructor"><span class="keyword">constructor</span>() </span>&#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><code>providedIn</code> tells Angular that the root injector is responsible for creating an instance of the HeroService (by invoking its constructor) and making it available across the application.</p>
<p>In the following excerpt, the @Injectable decorator is used to configure a provider that will be available in any injector that includes the HeroModule.</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Injectable &#125; from <span class="string">'@angular/core'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; HeroModule &#125; from <span class="string">'./hero.module'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; HEROES &#125;     from <span class="string">'./mock-heroes'</span>;</span><br><span class="line"></span><br><span class="line">@Injectable(&#123;</span><br><span class="line">  <span class="comment">// we declare that this service should be created</span></span><br><span class="line">  <span class="comment">// by any injector that includes HeroModule.</span></span><br><span class="line"></span><br><span class="line">  providedIn: HeroModule,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> HeroService &#123;</span><br><span class="line">  getHeroes() &#123; <span class="keyword">return</span> HEROES; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="@NgModule_providers">@NgModule providers</h2><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">providers: [</span><br><span class="line">  UserService,</span><br><span class="line">  &#123; provide: APP_CONFIG, useValue: HERO_DI_CONFIG &#125;</span><br><span class="line">],</span><br></pre></td></tr></table></figure>
<p>The first entry registers the UserService class (not shown) under the UserService injection token. The second registers a value (HERO_DI_CONFIG) under the APP_CONFIG injection token.</p>
<h2 id="@Component_providers">@Component providers</h2><p>In addition to providing the service application-wide or within a particular @NgModule, services can also be provided in specific components. Services provided in component-level is only available within that component injector or in any of its child components.</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">import &#123; Component &#125; from '@angular/core';</span><br><span class="line">import &#123; HeroService &#125; from './hero.service';</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: 'app-heroes',</span><br><span class="line">  providers: [ HeroService ],</span><br><span class="line">  template: `</span><br><span class="line">    &lt;h2&gt;Heroes&lt;/h2&gt;</span><br><span class="line">    &lt;app-hero-list&gt;&lt;/app-hero-list&gt;</span><br><span class="line">  `</span><br><span class="line">&#125;)</span><br><span class="line">export class HeroesComponent &#123; &#125;</span><br></pre></td></tr></table></figure>
<h2 id="@Injectable,_@NgModule_or_@Component">@Injectable, @NgModule or @Component</h2><ul>
<li><p>@Injectable<br>Tree shakable</p>
</li>
<li><p>@NgModule.providers<br>registered with the application’s root injector. Angular can inject the corresponding services in any class it creates. Once created, a service instance lives for the life of the app and Angular injects this one service instance in every class that needs it.</p>
</li>
</ul>
<p>You’re likely to inject the UserService in many places throughout the app and will want to inject the same service instance every time. Providing the UserService with an Angular module is a good choice if an @Injectable provider is not an option..</p>
<p>To be precise, Angular module providers are registered with the root injector unless the module is lazy loaded. In this sample, all modules are eagerly loaded when the application starts, so all module providers are registered with the app’s root injector.</p>
<ul>
<li>@Component.providers</li>
</ul>
<p>A component’s providers (@Component.providers) are registered with each component instance’s own injector.</p>
<p>Angular can only inject the corresponding services in that component instance or one of its descendant component instances. Angular cannot inject the same service instance anywhere else.</p>
<h1 id="Providers">Providers</h1><ul>
<li>The provide object literal</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">providers: [Logger]</span><br></pre></td></tr></table></figure>
<p>shorthand expressioin using a provider literal with two properties:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[&#123; provide: Logger, useClasss: Logger &#125;]</span><br></pre></td></tr></table></figure>
<ul>
<li>Alternative class providers</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[&#123; provide: Logger, useClass: BetterLogger &#125;]</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@Injectable()&#10;export class EvenBetterLogger extends Logger &#123;&#10;  constructor(private userService: UserService) &#123; super(); &#125;&#10;&#10;  log(message: string) &#123;&#10;    let name = this.userService.user.name;&#10;    super.log(`Message to $&#123;name&#125;: $&#123;message&#125;`);&#10;  &#125;&#10;&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[ &#10;    UserService,&#10;    &#123; provide: Logger, useClass: EvenBetterLogger &#125;&#10;]</span><br></pre></td></tr></table></figure>
<ul>
<li>Aliased class providers<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[ NewLogger,&#10;  // Not aliased! Creates two instances of `NewLogger`&#10;  &#123; provide: OldLogger, useClass: NewLogger&#125;]</span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[ NewLogger,&#10;  // Alias OldLogger w/ reference to NewLogger&#10;  &#123; provide: OldLogger, useExisting: NewLogger&#125;]</span><br></pre></td></tr></table></figure>
<ul>
<li>Value providers</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">export function SilentLoggerFn() &#123;&#125;&#10;&#10;const silentLogger = &#123;&#10;  logs: [&#39;Silent logger says &#34;Shhhhh!&#34;. Provided via &#34;useValue&#34;&#39;],&#10;  log: SilentLoggerFn&#10;&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[&#123; provide: Logger, useValue: silentLogger &#125;]</span><br></pre></td></tr></table></figure>
<ul>
<li>Factory providers<br><strong>hero.service.ts</strong><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">constructor(&#10;  private logger: Logger,&#10;  private isAuthorized: boolean) &#123; &#125;&#10;&#10;getHeroes() &#123;&#10;  let auth = this.isAuthorized ? &#39;authorized &#39; : &#39;unauthorized&#39;;&#10;  this.logger.log(`Getting heroes for $&#123;auth&#125; user.`);&#10;  return HEROES.filter(hero =&#62; this.isAuthorized || !hero.isSecret);&#10;&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><strong>hero.service.provider.ts</strong><br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">let heroServiceFactory = (logger: Logger, userService: UserService) =&#62; &#123;&#10;  return new HeroService(logger, userService.user.isAuthorized);&#10;&#125;;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">export let heroServiceProvider =&#10;  &#123; provide: HeroService,&#10;    useFactory: heroServiceFactory,&#10;    deps: [Logger, UserService]&#10;  &#125;;</span><br></pre></td></tr></table></figure>
<ul>
<li>Creating Tree-shakeable providers<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@Injectable(&#123;&#10;  providedIn: &#39;root&#39;,&#10;  useFactory: () =&#62; new Service(&#39;dependency&#39;),&#10;&#125;)&#10;export class Service &#123;&#10;  constructor(private dep: string) &#123;&#10;  &#125;&#10;&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>Injection Token</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import &#123; InjectionToken &#125; from &#39;@angular/core&#39;;&#10;// export const TOKEN = new InjectionToken(&#39;desc&#39;);&#10;&#10;export const TOKEN = &#10;  new InjectionToken(&#39;desc&#39;, &#123; providedIn: &#39;root&#39;, factory: () =&#62; new AppConfig(), &#125;)&#10;&#10;const TOKEN = &#10;  new InjectionToken(&#39;tree-shakeable token&#39;, &#10;    &#123; providedIn: &#39;root&#39;, factory: () =&#62; &#10;        new AppConfig(inject(Parameter1), inject(Paremeter2)), &#125;);&#10;        &#10;export const HERO_DI_CONFIG: AppConfig = &#123;&#10;  apiEndpoint: &#39;api.heroes.com&#39;,&#10;  title: &#39;Dependency Injection&#39;&#10;&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">constructor(@Inject(TOKEN));</span><br></pre></td></tr></table></figure></span>
      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Angular/" rel="tag">#Angular</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/05/27/angular-dependency-injection-in-action/" rel="prev">Angular DI in Action</a>
            
          </div>

          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/03/07/cqrsandeventsourcing/" rel="next">CRQS and Event Sourcing</a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>

 </div>

        

        
          <div class="comments" id="comments">
            
          </div>
        
      </div>

      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table Of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="css/images/1035498.gif" alt="Chandler" itemprop="image"/>
          <p class="site-author-name" itemprop="name">Chandler</p>
        </div>
        <p class="site-description motion-element" itemprop="description">Chandler's Blog</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">53</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            
              <span class="site-state-item-count">0</span>
              <span class="site-state-item-name">categories</span>
              
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">29</span>
              <span class="site-state-item-name">tags</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      
        <section class="post-toc-wrap sidebar-panel-active">
          <div class="post-toc-indicator-top post-toc-indicator"></div>
          <div class="post-toc">
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Injector"><span class="nav-number">1.</span> <span class="nav-text">Injector</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#@Injectable_providers"><span class="nav-number">1.1.</span> <span class="nav-text">@Injectable providers</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#@NgModule_providers"><span class="nav-number">1.2.</span> <span class="nav-text">@NgModule providers</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#@Component_providers"><span class="nav-number">1.3.</span> <span class="nav-text">@Component providers</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#@Injectable,_@NgModule_or_@Component"><span class="nav-number">1.4.</span> <span class="nav-text">@Injectable, @NgModule or @Component</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Providers"><span class="nav-number">2.</span> <span class="nav-text">Providers</span></a></li></ol></div>
            
          </div>
          <div class="post-toc-indicator-bottom post-toc-indicator"></div>
        </section>
      

    </div>
  </aside>


    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner"> <div class="copyright" >
  
  &copy; &nbsp; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="icon-next-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Chandler</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


 </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  
  
    
    

  


  
  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.1"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.1"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.5.1" id="motion.global"></script>




  <script type="text/javascript" src="/js/nav-toggle.js?v=0.4.5.1"></script>
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  
<script type="text/javascript" src="/js/bootstrap.scrollspy.js?v=0.4.5.1" id="bootstrap.scrollspy.custom"></script>


<script type="text/javascript" id="sidebar.toc.highlight">
  $(document).ready(function () {
    var tocSelector = '.post-toc';
    var $tocSelector = $(tocSelector);
    var activeCurrentSelector = '.active-current';

    $tocSelector
      .on('activate.bs.scrollspy', function () {
        var $currentActiveElement = $(tocSelector + ' .active').last();

        removeCurrentActiveClass();
        $currentActiveElement.addClass('active-current');

        $tocSelector[0].scrollTop = $currentActiveElement.position().top;
      })
      .on('clear.bs.scrollspy', function () {
        removeCurrentActiveClass();
      });

    function removeCurrentActiveClass () {
      $(tocSelector + ' ' + activeCurrentSelector)
        .removeClass(activeCurrentSelector.substring(1));
    }

    function processTOC () {
      getTOCMaxHeight();
      toggleTOCOverflowIndicators();
    }

    function getTOCMaxHeight () {
      var height = $('.sidebar').height() -
                   $tocSelector.position().top -
                   $('.post-toc-indicator-bottom').height();

      $tocSelector.css('height', height);

      return height;
    }

    function toggleTOCOverflowIndicators () {
      tocOverflowIndicator(
        '.post-toc-indicator-top',
        $tocSelector.scrollTop() > 0 ? 'show' : 'hide'
      );

      tocOverflowIndicator(
        '.post-toc-indicator-bottom',
        $tocSelector.scrollTop() >= $tocSelector.find('ol').height() - $tocSelector.height() ? 'hide' : 'show'
      )
    }

    $(document).on('sidebar.motion.complete', function () {
      processTOC();
    });

    $('body').scrollspy({ target: tocSelector });
    $(window).on('resize', function () {
      if ( $('.sidebar').hasClass('sidebar-active') ) {
        processTOC();
      }
    });

    onScroll($tocSelector);

    function onScroll (element) {
      element.on('mousewheel DOMMouseScroll', function (event) {
          var oe = event.originalEvent;
          var delta = oe.wheelDelta || -oe.detail;

          this.scrollTop += ( delta < 0 ? 1 : -1 ) * 30;
          event.preventDefault();

          toggleTOCOverflowIndicators();
      });
    }

    function tocOverflowIndicator (indicator, action) {
      var $indicator = $(indicator);
      var opacity = action === 'show' ? 0.4 : 0;
      $indicator.velocity ?
        $indicator.velocity('stop').velocity({
          opacity: opacity
        }, { duration: 100 }) :
        $indicator.stop().animate({
          opacity: opacity
        }, 100);
    }

  });
</script>

<script type="text/javascript" id="sidebar.nav">
  $(document).ready(function () {
    var html = $('html');
    var TAB_ANIMATE_DURATION = 200;
    var hasVelocity = $.isFunction(html.velocity);

    $('.sidebar-nav li').on('click', function () {
      var item = $(this);
      var activeTabClassName = 'sidebar-nav-active';
      var activePanelClassName = 'sidebar-panel-active';
      if (item.hasClass(activeTabClassName)) {
        return;
      }

      var currentTarget = $('.' + activePanelClassName);
      var target = $('.' + item.data('target'));

      hasVelocity ?
        currentTarget.velocity('transition.slideUpOut', TAB_ANIMATE_DURATION, function () {
          target
            .velocity('stop')
            .velocity('transition.slideDownIn', TAB_ANIMATE_DURATION)
            .addClass(activePanelClassName);
        }) :
        currentTarget.animate({ opacity: 0 }, TAB_ANIMATE_DURATION, function () {
          currentTarget.hide();
          target
            .stop()
            .css({'opacity': 0, 'display': 'block'})
            .animate({ opacity: 1 }, TAB_ANIMATE_DURATION, function () {
              currentTarget.removeClass(activePanelClassName);
              target.addClass(activePanelClassName);
            });
        });

      item.siblings().removeClass(activeTabClassName);
      item.addClass(activeTabClassName);
    });

    $('.post-toc a').on('click', function (e) {
      e.preventDefault();
      var targetSelector = escapeSelector(this.getAttribute('href'));
      var offset = $(targetSelector).offset().top;
      hasVelocity ?
        html.velocity('stop').velocity('scroll', {
          offset: offset  + 'px',
          mobileHA: false
        }) :
        $('html, body').stop().animate({
          scrollTop: offset
        }, 500);
    });

    // Expand sidebar on post detail page by default, when post has a toc.
    var $tocContent = $('.post-toc-content');
    if (isDesktop() && CONFIG.sidebar === 'post') {
      if ($tocContent.length > 0 && $tocContent.html().trim().length > 0) {
        displaySidebar();
      }
    }
  });
</script>



  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
      if (isMobile()) {
        FastClick.attach(document.body);
      }
    });
  </script>

  

  
  

  
  <script type="text/javascript" src="/js/lazyload.js"></script>
  <script type="text/javascript">
    $(function () {
      $("#posts").find('img').lazyload({
        placeholder: "/images/loading.gif",
        effect: "fadeIn"
      });
    });
  </script>
</body>
</html>
